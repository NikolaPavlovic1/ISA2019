<body class="inventory-body">
    <div class="container">
        <div>
            <div class="text-center">
                <br><br><br><br><br>
                <h1>Istorija pregleda </h1>
                <table class="table sortable-table table-striped" matSort (matSortChange)="sortData($event)">
                    <thead>
                        <tr>
                            <th mat-sort-header="medium">Datum i vreme pregleda</th>
                            <th mat-sort-header="type">Tip</th>
                            <th mat-sort-header="duration">Trajanje</th>
                            <th mat-sort-header="hall">Sala</th>
                            <th mat-sort-header="doctor">Lekar</th>
                            <th mat-sort-header="clinic">Klinika</th>
                            <th mat-sort-header="price">Cena</th>
                            <th mat-sort-header="status">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let a of sortedData; let i = index">

                            <td style="text-align: left;">{{a.medium}}</td>
                            <td style="text-align: center;">{{a.typeOfExamination.name}}</td>
                            <td style="text-align: center;">{{a.duration}} min</td>
                            <td style="text-align: center;">{{a.hall}}</td>
                            <td style="text-align: center;">{{a.doctor.name}}</td>
                            <td style="text-align: center;">{{a.doctor.clinic.name}}</td>
                            <td style="text-align: center;">{{a.typeOfExamination.price - a.discount}} â‚¬</td>
                            <td style="text-align: center;">{{a.status}}</td>
                            <td style="text-align: center;"><button class="btn btn-link"
                                    (click)="evaluateClinic(ocjKlinika, a)" *ngIf="a.status == 'SCHEDULED'">Oceni
                                    kliniku</button></td>
                            <td style="text-align: center;"><button class="btn btn-link"
                                    (click)="evaluateDoctor(ocjLjekar, a)" *ngIf="a.status == 'SCHEDULED'">Oceni
                                    lekara</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</body>

<ng-template #ocjKlinika>
    <div class="modal-header">
        <h3 class="text-center">Ocenjivanje klinike</h3>
    </div>
    <div class="modal-body d-flex ">
        <div class="text-center">
            <div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                                <label>Ime klinike</label>
                                <input class="form-control" [(ngModel)]="clinicName"
                                    [ngModelOptions]="{standalone:true}" disabled>
                            </div>
                        </div>
                        <div class="col-md-6">
                        <div class="form-group">
                                <label>Grad</label>
                                <input class="form-control" [(ngModel)]="clinicCity"
                                    [ngModelOptions]="{standalone:true}" disabled>
                            </div>
                        </div>
                        <div class="col-md-6">
                        <div class="form-group">
                                <label>Trenutna ocena</label>
                                <input class="form-control" [(ngModel)]="evaluatedClinic"
                                    [ngModelOptions]="{standalone:true}" disabled>
                            </div>
                        </div>
                        <div class="col-md-6">
                        <div class="form-group">                           
                                <label>Moja ocena</label>                           
                                <select class="form-control" [(ngModel)]="evaluatedClinic" id="ocjenjenaKlinika" name="ocjenjenaKlinika">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>
                        <br>
                        <div class="form-group">
                            <div class="col-md-12">
                                <button type="submit" (click)="evaluateCl()" class="btn btn-secondary ">Oceni</button>
                                <button (click)="cancel()" class="btn btn-secondary">Odustani</button>
                            </div>
                        </div>
                   
                </div>

            </div>
        </div>
    </div>
</ng-template>

<ng-template #ocjLjekar>
    <div class="modal-header">
        <h3 class="text-center">Ocenjivanje lekara</h3>
    </div>
    <div class="modal-body d-flex ">
        <div class="text-center">
            <div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Ime </label>
                            <input class="form-control" [(ngModel)]="doctorName" [ngModelOptions]="{standalone:true}"
                                disabled>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Prezime</label>
                            <input class="form-control" [(ngModel)]="doctorSurname"
                                [ngModelOptions]="{standalone:true}" disabled>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Trenutna ocena</label>
                            <input class="form-control" [(ngModel)]="evaluatedDoctor" [ngModelOptions]="{standalone:true}"
                                disabled>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Moja ocena</label>
                            <select class="form-control" [(ngModel)]="evaluatedDoctor" id="ocjenjenLjekar" name="ocjenjenLjekar">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                    <div class="col-md-12">
                        
                            <button type="submit" (click)="evaluateDoc()" class="btn btn-secondary ">Oceni</button>
                            <button (click)="cancel()" class="btn btn-secondary">Odustani</button>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</ng-template>